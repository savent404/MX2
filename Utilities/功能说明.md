# MX audio 功能说明
## 设备主要流程

### 上电操作
- 1.上电后检测主按键按下时长，未超过设定值则不执行开机操作
- 2.开机后播放Boot音效(0:/System/boot.wav)
- 3.开机后进入Ready状态

### Ready状态下的操作
- 1.按压主按键超过设定阈值触发**In**并进入**Running**状态
- 2.按压副按键超过设定阈值触发**Bankswitch**
- 3.按压主按键超过设定阈值触发**Shudown**并关机
- 4.实时检测充电接口，如有充电接口插入进入**Charge**状态

### Charge状态下的操作
- 1.LED产生呼吸灯效果，要求颜色变换为正弦波波形
- 2.主副按键按下后均触发**charging**

### Running状态下的操作
- 1.加速度计检测到挥动触发**TriggerB**
- 2.加速度计检测到敲击触发**TriggerC**
- 3.按下副按键触发**TriggerD**
- 4.长按副按键超过设定阈值触发**TriggerE**
- 5.LED按照设定模式和颜色循环执行
- 6.无触发时循环播放0:/Bank#n/hum.wav(#n代表当前配置ID，可保存多套设定)
- 7.有触发时hum.wav与触发音效混音播放
- 8.按下主按键超过时长触发**Out**,并进入Ready状态

### 触发消息
- **In**: 播放0:/Bank#n/In/随机.wav(#n为当前配置ID),LED按照设定颜色以及延时渐亮(正弦曲线)
- **Out**: 播放0:/Bank#n/Out/随机.wav(#n为当前配置ID),LED同触发**In**渐暗
- **TriggerB**: 触发0:/Bank#n/TriggerB/随机.wav(#n为当前配置ID),LED按照配置方式触发
- **TriggerC**: 同**TriggerB**,不过播放文件路径改为0:/Bank#n/TriggerC(#n为当前配置ID)
- **TriggerD**: 同**TriggerB**,不过播放文件路径改为0:/Bank#n/TriggerD(#n为当前配置ID)
- **TriggerE**: 循环播放0:/Bank#n/TriggerE/随机.wav, 直到主按键松开，LED按照配置操作执行
- **Charging**: 播放0:/System/charging.wav

## config参数实例
- Vol=2             音量设置(0无声，1小声，2中等，3大声)
- Tpon=800          开机按钮时长，收货后请改为800左右
- Tpoff=800         关机按钮时长
- Tout=200          开剑按钮时长
- Tin=500           收剑按钮时长
- Ts_switch=500     切换配置按钮时长，Tin & Ts_switch 必须小- 于TEtrigger
- Tautoin=60000     /自动收剑时长，0为不自动收剑
- Tautooff=120000   /收剑后自动关机时长，0表示不自动关机
- Tmute=500         /关机状态下，进入静音模式的双键复合触发时长
- TLcolor=200       /开机状态下，LEDbank变更的双键复合触发时长，若TLcolor>TEtrigger,或TLcolor>Tin,则此参数无效
- TBfreeze=200      
- TBMode=1
- TCfreeze=150
- TCMode=2,3
- TDfreeze=150
- TDmode=2,3
- TEtrigger=600
- TEmode=4
- TLon=2000
- TLoff=700
- Lbright=1023
- Ldeep=768
- LMode=2
- T_Breath=1000
- BANK1=1023,1023,0,0  /主灯色彩配置
- FBank1=1023,0,1023,0 /Foc色彩配置
- BANK2=1023,0,1023,0
- FBANK2=1023,1023,0,0
- BANK3=0,0,1023,0
- FBANK3=1023,0,1023,0